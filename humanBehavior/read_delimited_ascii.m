function T = read_delimited_ascii(filespec, delimiter)% T = read_delimited_ascii(filespec, delimiter)% % 	Reads a delimited ascii text file, and returns each entry as an element % 	of the cell array T. Row and column entries are preserved. % %   DELIMITER can be any ascii character. Use either '\t' or char(9) for tab, ',' for comma, etc% % 	FILESPEC is a full path and file descriptor, and can be obtained with uigetfile, % 	as sown in the following example:% 	% 	[f, p] = uigetfile('*');% 	filespec = [p f];% 	T = read_delimited_ascii(filespec, '\t')% 	% 	% MJ, 6-21-99 through 7-3-08	% if delimiter == '\t'; delimiter = charif nargin == 0; [f, p] = uigetfile('*'); filespec = [p f]; end	fid = fopen(filespec);T = {};row = 1;col = 1;while 1	line = fgetl(fid);    if ~isstr(line), break, end			while 1		[word, R] = strtok(line, char(9)); % 		disp( [ num2str([row, col, isempty(R)]) '	' word '	' R] )		if [~isstr(word)], break, end   % Don't add a word if there isn't one			T{row, col} = word;        if [isempty(R)], break, end     % break to the next line if the remainder of this one is empty			line = R;			col = col + 1;	end	col = 1;	row = row + 1;			endfclose(fid);disp(T)